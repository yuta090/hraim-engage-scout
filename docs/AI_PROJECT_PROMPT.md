# AI_PROJECT_PROMPT.md - 汎用AI開発環境構築システム

**🤖 プロジェクト初期化プロンプト**: どんなプロジェクトでもAIの効率的な作業環境を即座に構築

---

## 🚀 使用方法

### プロジェクトタイプ判定（AIが自動実行）
```yaml
AIが最初に質問:
  「これは新規プロジェクトですか？それとも既存プロジェクトへのAI環境追加ですか？」
  
  1. 新規プロジェクト → セクション A へ
  2. 既存プロジェクト → セクション B へf
```

### A. 新規プロジェクトでの初期設定
```bash
# AIが以下を順番に質問します：

Q1: プロジェクト名は何ですか？
Q2: このプロジェクトの概要を教えてください（1-2文）
Q3: 主要機能を3-5個教えてください
Q4: 開発上の制約や注意点はありますか？

# AIが自動的に分析・実行：
1. ファイル構成から技術スタックを自動検出
   - package.json → Node.js/npm
   - requirements.txt → Python
   - Gemfile → Ruby
   - go.mod → Go
   - pom.xml → Java/Maven
   - etc...
   
2. フレームワーク自動検出
   - next.config.js → Next.js
   - angular.json → Angular
   - vue.config.js → Vue.js
   - settings.py → Django
   - etc...

3. docs/フォルダ作成
4. 検出した技術スタックを反映したドキュメント生成
5. CLAUDE.md作成
6. 初期タスクリスト作成
```

### B. 既存プロジェクトへのAI環境追加
```bash
# AIが以下を順番に質問します：

Q1: プロジェクトのルートディレクトリを確認しました。正しいですか？
    現在のディレクトリ: [表示]
    
Q2: 現在の開発における課題や問題点を教えてください
Q3: 編集してはいけない重要なファイルはありますか？
Q4: よく使う開発コマンドを教えてください（なければ自動検出します）

# AIが自動的に分析・実行：
1. プロジェクト構造の完全スキャン
   - ファイル拡張子から言語検出
   - 設定ファイルからフレームワーク検出
   - ディレクトリ構造から設計パターン推測
   
2. 既存ドキュメントの自動検出・読み込み
   - README.md, CONTRIBUTING.md
   - docs/ディレクトリ内のファイル
   - Wiki, CHANGELOG等
   
3. package.json/requirements.txt等から依存関係分析
4. .gitignore等から重要ファイル推測
5. docs/フォルダ作成（なければ）
6. 検出情報を統合したドキュメント生成
7. CLAUDE.md作成（既存構造を尊重）
```

### C. 技術スタック自動検出ロジック
```yaml
言語検出パターン:
  JavaScript/TypeScript:
    - package.json, node_modules/
    - .js, .jsx, .ts, .tsx ファイル
    - yarn.lock, pnpm-lock.yaml
    
  Python:
    - requirements.txt, Pipfile, pyproject.toml
    - .py ファイル
    - venv/, __pycache__/
    
  Java:
    - pom.xml, build.gradle
    - .java ファイル
    - src/main/java/
    
  Go:
    - go.mod, go.sum
    - .go ファイル
    
  Ruby:
    - Gemfile, Gemfile.lock
    - .rb ファイル
    - config.ru

フレームワーク検出:
  Frontend:
    - next.config.js → Next.js
    - nuxt.config.js → Nuxt.js
    - angular.json → Angular
    - vue.config.js → Vue.js
    - gatsby-config.js → Gatsby
    
  Backend:
    - express依存 → Express.js
    - settings.py → Django
    - config/routes.rb → Rails
    - main.go + gin → Gin
    
  Mobile:
    - ios/, android/ → React Native
    - pubspec.yaml → Flutter
    - *.xcodeproj → iOS Native
    
データベース検出:
  - docker-compose.yml内のイメージ
  - .env内の接続文字列
  - config/database.yml
  - prisma/schema.prisma → Prisma
```

---

## 🧠 AI効率化システム - 普遍的設計原則

### 📁 必須ドキュメント構造（自動生成）
```
docs/
├── AI_INDEX.md          # 修正履歴・禁止事項・知識蓄積
├── AI_PROJECT_INFO.md   # プロジェクト固有情報
├── PROCESS_FLOW.md      # 処理フロー・業務ロジック
└── PROTECTED_AREAS.md   # 編集禁止ファイル一覧

プロジェクトルート/
├── CLAUDE.md            # AI作業開始時の必須読込ファイル
└── README.md            # 人間向けドキュメント
```

### 🔄 問題解決の普遍的アプローチ
```yaml
水平思考による分析:
  技術的視点:
    - コード構造・依存関係の把握
    - パフォーマンス・リソース分析
    - エラーパターンの類型化

  業務的視点:
    - ユーザーストーリーの理解
    - データフロー・状態遷移
    - 外部システム連携点

  類推思考:
    - 類似プロジェクトからの知見活用
    - 異分野の解決策の応用
    - 成功パターンの抽象化

効率化の原則:
  - 同じ調査を繰り返さない（インデックス活用）
  - 修正の巻き戻りを防ぐ（履歴管理）
  - 知識を蓄積する（パターン認識）
  - 明確な検証基準を持つ（目的駆動）
```

---

## 📋 AIが作成すべきドキュメントテンプレート

### 1. AI_INDEX.md テンプレート
```markdown
# AI_INDEX.md - プロジェクト作業インデックス

## 🟢 完了済み修正
| 日付 | 修正内容 | 対象ファイル | 結果 |
|------|---------|-------------|------|
| YYYY-MM-DD | [修正内容] | [ファイルパス] | ✅成功 |

## 🔴 失敗した試行
| 日付 | 試行内容 | 失敗理由 | 学習事項 |
|------|---------|---------|----------|
| YYYY-MM-DD | [内容] | [理由] | [教訓] |

## ⚫ 編集禁止領域
| ファイル/関数 | 理由 | 重要度 |
|--------------|------|--------|
| [パス] | [理由] | 🔥最重要 |

## 💡 蓄積された知識
### よくあるエラーパターン
- [パターン1]: [解決策]
- [パターン2]: [解決策]

### 成功パターン
- [パターン1]: [詳細]
- [パターン2]: [詳細]
```

### 2. CLAUDE.md テンプレート
```markdown
# CLAUDE.md

このファイルはAI (Claude) が作業を開始する際に必ず最初に読むべきファイルです。

## 🚨 作業開始時の必須手順
\```bash
# 1. プロジェクト状態の確認
Read docs/AI_INDEX.md
Read docs/AI_PROJECT_INFO.md

# 2. 現在のタスク確認
TodoRead

# 3. 最新の変更確認
git status
\```

## 📋 プロジェクト概要
[1-2文でプロジェクトの目的を記載]

## 🛠 開発環境
- 言語: [言語とバージョン]
- 主要ライブラリ: [ライブラリ一覧]
- 実行環境: [環境情報]

## 🔧 よく使うコマンド
\```bash
# 開発サーバー起動
[コマンド]

# テスト実行
[コマンド]

# ビルド
[コマンド]
\```

## ⚠️ 注意事項
- [重要な注意点1]
- [重要な注意点2]

## 📁 プロジェクト構造
\```
[主要なディレクトリ構造]
\```
```

### 3. AI_PROJECT_INFO.md テンプレート
```markdown
# AI_PROJECT_INFO.md - プロジェクト固有情報

## 基本情報
- プロジェクト名: [名前]
- 開始日: [日付]
- 主要機能: [機能説明]
- ターゲットユーザー: [ユーザー層]

## 技術アーキテクチャ
### フロントエンド
- フレームワーク: [詳細]
- 状態管理: [詳細]

### バックエンド
- フレームワーク: [詳細]
- データベース: [詳細]

### インフラ
- ホスティング: [詳細]
- CI/CD: [詳細]

## ビジネスルール
1. [ルール1]
2. [ルール2]

## 外部連携
- API: [連携先]
- サービス: [使用サービス]
```

---

## 🎯 プロジェクト開始時のAIへの質問テンプレート

### AIに環境構築を依頼する際の質問
```
以下の情報を基に、AI効率化システムを構築してください：

1. プロジェクト名: [プロジェクト名]
2. 概要: [何を作るプロジェクトか]
3. 技術スタック:
   - 言語: [使用言語]
   - フレームワーク: [主要フレームワーク]
   - データベース: [DB種類]
   - その他: [重要なライブラリ等]
4. 主要機能: [3-5個の主要機能]
5. 開発における注意点: [あれば記載]

上記に基づいて以下を作成してください：
- docs/AI_INDEX.md
- docs/AI_PROJECT_INFO.md
- docs/PROCESS_FLOW.md
- docs/PROTECTED_AREAS.md
- CLAUDE.md
```

---

## 🔄 継続的改善のための仕組み

### 📁 タスク管理システム（ファイルベース）
```yaml
タスクファイル構造:
  docs/tasks/
  ├── active_tasks.md      # 現在進行中のタスク
  ├── completed_tasks.md   # 完了タスク（月次アーカイブ）
  ├── backlog.md          # 未着手タスク
  └── issues/             # 個別課題ファイル
      ├── issue_001.md
      ├── issue_002.md
      └── ...

課題提案時の自動処理:
  1. issue_XXX.md ファイル作成
  2. active_tasks.md に追加
  3. AI_INDEX.md にリンク
  4. 関連ファイルの記録
```

### 📋 課題管理テンプレート
```markdown
# Issue #XXX: [課題タイトル]

## 概要
[課題の説明]

## 発生日時
YYYY-MM-DD HH:MM

## 影響範囲
- 対象ファイル: [ファイルパス]
- 影響機能: [機能名]
- 優先度: 高/中/低

## 提案された解決策
1. [解決案1]
2. [解決案2]

## 実行ログ
- YYYY-MM-DD: [実行内容と結果]
- YYYY-MM-DD: [実行内容と結果]

## ステータス
- [ ] 未着手
- [ ] 調査中
- [ ] 実装中
- [ ] テスト中
- [ ] 完了

## 関連Issue
- #XXX
- #XXX
```

### 知識蓄積ルール
```yaml
成功時の記録:
  - 何が成功したか
  - なぜ成功したか
  - 再現可能な手順
  - 他への応用可能性
  - → completed_tasks.md に記録

失敗時の記録:
  - 何を試したか
  - なぜ失敗したか
  - 根本原因は何か
  - 次回の回避策
  - → AI_INDEX.md の失敗セクションに記録

パターン認識:
  - 3回以上発生 → パターンとして記録
  - 類似事象の抽象化
  - 解決策の一般化
  - → docs/patterns.md に集約
```

### 自動更新トリガー
```yaml
課題提案時:
  1. 新規issueファイル作成
  2. active_tasks.md 更新
  3. TodoWriteツールと同期

修正完了時:
  1. issueファイルのステータス更新
  2. completed_tasks.md へ移動
  3. AI_INDEX.md の成功事例に追加

ドキュメント同期:
  - 大きな変更時は全ドキュメント確認
  - 矛盾がないか検証
  - 最新状態を反映
```

---

## 🚨 AIの作業原則（全プロジェクト共通）

### 必須ルール
1. **作業開始時は必ずCLAUDE.mdを読む**
2. **修正前にAI_INDEX.mdで過去の履歴確認**
3. **同じエラーを繰り返さない（パターン学習）**
4. **目的が不明確なまま作業しない**
5. **破壊的変更前は必ず確認を取る**

### 効率化のコツ
- 検索は一度で済ませる（結果を記録）
- 類似の問題は過去の解決策を参照
- 水平思考で多角的に分析
- 小さく試して大きく展開
- 常に「なぜ」を問い続ける

### 🎯 AIの動作・挙動ルール

#### 📝 ファイル作成・管理
```
✅ 許可される作成:
├─ 既存ファイルの編集・更新
├─ 明示的に要求されたファイル
├─ テスト・設定ファイル (必要時のみ)
└─ 一時的なスクリプト・ツール

🚫 禁止される作成:
├─ 不要なドキュメントファイル (*.md)
├─ README ファイルの無断作成
├─ 設計書・仕様書の勝手な作成
└─ バックアップファイルの大量生成
```

#### 🚀 開発サーバー・プロセス管理
```
バックグラウンド実行:
├─ 開発サーバーは常にバックグラウンドで起動
├─ npm run dev & （&を付けて実行）
├─ nohup npm run dev > dev.log 2>&1 &
└─ プロセスIDを記録して管理

長時間実行コマンド:
├─ テスト実行も可能な限りバックグラウンド
├─ ビルドプロセスも並列実行可能
├─ ログは別ファイルに出力
└─ 必要時のみフォアグラウンド実行
```

#### 🔄 並列処理・効率化
```
複数ツール同時実行:
├─ 読み込み操作は並列で実行
├─ 独立したタスクは同時処理
├─ 待機時間を最小化
└─ リソースを最大活用

情報収集の効率化:
├─ 関連ファイルは一度にすべて読む
├─ grep/find結果をキャッシュ
├─ 重複調査を避ける
└─ 結果を構造化して保存
```

#### 🎯 タスク管理の自動化
```
TodoWrite/TodoRead活用:
├─ 3つ以上のステップ → 自動的にTodo作成
├─ 完了したら即座に更新
├─ 進捗を可視化
└─ ユーザーに現在の状態を常に共有

ドキュメント自動更新:
├─ 修正完了 → AI_INDEX.md自動更新
├─ 新機能追加 → ドキュメント反映
├─ エラー発見 → パターン記録
└─ 知識の蓄積を自動化
```

#### 📊 ログ・出力管理
```
出力の簡潔性:
├─ 必要最小限の情報のみ出力
├─ 冗長な説明を避ける
├─ 結果重視の報告
└─ アクション指向のメッセージ

エラー処理:
├─ エラーは即座に報告
├─ 原因と対策を簡潔に提示
├─ 関連する過去事例を参照
└─ 次のアクションを明確化
```

#### 🛠 コマンド実行パターン
```bash
# リンターとテストの並列実行
npm run lint & npm run test & wait

# ビルドとデプロイの連続実行
npm run build && npm run deploy

# 開発サーバーのバックグラウンド起動
npm run dev > dev.log 2>&1 &
echo "開発サーバーがバックグラウンドで起動しました (PID: $!)"

# プロセスの確認と停止
ps aux | grep "npm run dev"
kill -9 [PID]
```

#### 🔍 検索・調査の効率化
```
スマート検索:
├─ 最初に広範囲検索
├─ 結果を絞り込み
├─ パターンを認識
└─ 知識として記録

キャッシュ活用:
├─ 一度読んだファイルは記憶
├─ 検索結果を再利用
├─ 変更箇所のみ再確認
└─ 効率的な差分管理
```

### 🎨 デザイン・アクセシビリティルール

#### 📐 デザインシステム原則
```
一貫性の確保:
├─ カラーパレットの統一
├─ タイポグラフィの体系化
├─ スペーシングシステムの遵守
└─ コンポーネントの再利用

レスポンシブデザイン:
├─ モバイルファースト
├─ ブレークポイントの統一
├─ フレキシブルレイアウト
└─ タッチターゲットサイズ (最小44x44px)
```

#### ♿ アクセシビリティ基準
```
WCAG 2.1 準拠 (レベルAA):
├─ 色のコントラスト比
│   ├─ 通常テキスト: 4.5:1以上
│   └─ 大きいテキスト: 3:1以上
├─ キーボードナビゲーション
│   ├─ すべての機能にキーボードでアクセス可能
│   └─ フォーカスインジケータの明確化
├─ スクリーンリーダー対応
│   ├─ 適切なARIAラベル
│   ├─ セマンティックHTML
│   └─ 見出し階層の正確性
└─ エラーメッセージ
    ├─ 明確なエラー説明
    └─ 修正方法の提示
```

#### 🌐 多言語・国際化対応
```
i18n実装:
├─ テキストの外部化
├─ 日付・時刻フォーマット
├─ 通貨・数値表記
└─ RTL言語サポート準備

文字エンコーディング:
├─ UTF-8統一
├─ 絵文字サポート
└─ 特殊文字エスケープ
```

#### 📱 パフォーマンス最適化
```
フロントエンド最適化:
├─ 画像最適化
│   ├─ 適切なフォーマット選択 (WebP, AVIF)
│   ├─ レスポンシブ画像
│   └─ 遅延読み込み
├─ バンドルサイズ削減
│   ├─ コード分割
│   ├─ Tree Shaking
│   └─ 圧縮・最小化
└─ キャッシュ戦略
    ├─ ブラウザキャッシュ
    ├─ Service Worker
    └─ CDN活用
```

#### 🔗 デザインルール参照リンク
```yaml
外部リソース:
  デザインシステム:
    - ~/Documents/scripts/design_rules/README.md
    - ~/Documents/scripts/design_rules/accessibility/
    - ~/Documents/scripts/design_rules/components/
    
  スタイルガイド:
    - カラーパレット: design_rules/colors.md
    - タイポグラフィ: design_rules/typography.md
    - スペーシング: design_rules/spacing.md
    
  アクセシビリティ:
    - チェックリスト: design_rules/accessibility/checklist.md
    - テストツール: design_rules/accessibility/tools.md
    - ベストプラクティス: design_rules/accessibility/best-practices.md
```

#### 🛠 実装チェックリスト
```bash
# デザイン実装前の確認
□ デザインシステムに準拠しているか
□ カラーコントラスト比は適切か
□ レスポンシブ対応は完了しているか
□ キーボード操作は可能か
□ スクリーンリーダーでテスト済みか
□ エラー状態のデザインは用意されているか
□ ローディング状態は実装されているか
□ 空状態のデザインは考慮されているか
```

---

## 📝 メタ情報

### このシステムの利点
1. **プロジェクト間での知識共有** - 成功パターンの再利用
2. **エラーの再発防止** - 失敗履歴からの学習
3. **効率的な問題解決** - 体系化されたアプローチ
4. **継続的な改善** - 知識の蓄積と洗練
5. **新規参画者の即戦力化** - 明確なドキュメント


### バージョン情報
- システムバージョン: 2.2
- 最終更新: 2025-06-14
- 作成者: AI Efficiency System
- 更新内容: 
  - v2.1: AIの動作・挙動ルール（開発サーバーのバックグラウンド実行、並列処理、効率化パターン）を追加
  - v2.2: デザイン・アクセシビリティルール（WCAG 2.1準拠、デザインシステム、パフォーマンス最適化）を追加

---

## 📌 実行例：Claude再起動時の初期プロンプト

### 汎用的な初期プロンプト例
```
Read [プロジェクトパス]/docs/AI_PROJECT_PROMPT.md

このプロジェクトは既存プロジェクトへのAI環境追加です。
```

### HRaim Lambda Masterプロジェクトの場合
```
Read /Users/takahashiyuuta/Documents/scripts/hraim-lambda-master/docs/AI_PROJECT_PROMPT.md

このプロジェクトは既存プロジェクトへのAI環境追加です。
```

---

**使い方**: 新しいプロジェクトでClaudeを起動したら、最初にこのファイルを読み込ませ、プロジェクト情報を伝えて環境構築を依頼してください。