# スカウトシステム アーキテクチャ図

## システム全体構成

```
┌─────────────────────────────────────────────────────────────┐
│                    ユーザーインターフェース                    │
│                         (Flet GUI)                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐              │
│  │  Engage Scout   │    │  Airwork Scout  │              │
│  │    Button       │    │     Button      │              │
│  └────────┬────────┘    └────────┬────────┘              │
│           │                       │                         │
│  ┌────────▼────────┐    ┌────────▼────────┐              │
│  │  Age Range      │    │  Job Title      │              │
│  │   Inputs        │    │    Input        │              │
│  └─────────────────┘    └─────────────────┘              │
│                                                             │
│  ┌─────────────────────────────────────────┐              │
│  │          Prefecture Selector             │              │
│  └─────────────────────────────────────────┘              │
└─────────────────────────────────────────────────────────────┘

                              │
                              ▼

┌─────────────────────────────────────────────────────────────┐
│                     ビジネスロジック層                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐              │
│  │  engage_scout() │    │ airwork_scout() │              │
│  └────────┬────────┘    └────────┬────────┘              │
│           │                       │                         │
│  ┌────────▼────────┐    ┌────────▼────────┐              │
│  │ CandidateScout  │    │  AirworkSelenium │              │
│  │     Class       │    │   Automation     │              │
│  └────────┬────────┘    └────────┬────────┘              │
│           │                       │                         │
│  ┌────────▼──────────────────────▼────────┐              │
│  │          ScoutConfig Class              │              │
│  └─────────────────────────────────────────┘              │
└─────────────────────────────────────────────────────────────┘

                              │
                              ▼

┌─────────────────────────────────────────────────────────────┐
│                      自動化レイヤー                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐              │
│  │ EngageSelenium  │    │    Browser      │              │
│  │  Automation     │    │    Manager      │              │
│  └─────────────────┘    └─────────────────┘              │
│                                                             │
│  ┌─────────────────────────────────────────┐              │
│  │         Selenium WebDriver               │              │
│  │          (Chrome Driver)                 │              │
│  └─────────────────────────────────────────┘              │
└─────────────────────────────────────────────────────────────┘

                              │
                              ▼

┌─────────────────────────────────────────────────────────────┐
│                       データ層                               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │account.xlsx │  │account_air  │  │  settings/  │      │
│  │             │  │work.xlsx    │  │    *.xlsx   │      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
│                                                             │
│  ┌─────────────────────────────────────────┐              │
│  │              Log Files                   │              │
│  │           (log/*.log)                    │              │
│  └─────────────────────────────────────────┘              │
└─────────────────────────────────────────────────────────────┘
```

## データフロー図

```
[ユーザー入力]
    │
    ▼
[条件設定]
    ├─ 年齢範囲
    ├─ 職種
    └─ 都道府県
    │
    ▼
[認証処理]
    ├─ Excelから認証情報読込
    └─ ログイン実行
    │
    ▼
[検索実行]
    ├─ 条件に基づく候補者検索
    └─ 結果一覧取得
    │
    ▼
[候補者処理ループ]
    │
    ├─→[適格性チェック]
    │      ├─ 年齢確認
    │      └─ キーワード確認
    │      │
    │      ├─→[適格] → [スカウト送信]
    │      │                │
    │      └─→[不適格] → [スキップ]
    │                       │
    └──────────────────────┘
    │
    ▼
[処理完了]
    └─ ログ出力
```

## クラス間の相互作用

```
MyApp (main.py)
  │
  ├─ creates → CandidateScout
  │               │
  │               ├─ uses → EngageSeleniumAutomation
  │               ├─ uses → BrowserManager
  │               └─ uses → ScoutConfig
  │
  └─ creates → AirworkSeleniumAutomation
                  │
                  ├─ uses → BrowserManager  
                  └─ uses → ScoutConfig

ScoutConfig
  │
  ├─ manages → Age Range Settings
  ├─ manages → Keyword Filters
  └─ manages → Scout Criteria
```

## セキュリティアーキテクチャ

```
┌─────────────────────────────────────────┐
│         セキュリティレイヤー              │
├─────────────────────────────────────────┤
│                                         │
│  認証情報管理                           │
│  ├─ Excel暗号化                        │
│  ├─ メモリ内保持                       │
│  └─ ログマスキング                     │
│                                         │
│  アクセス制御                           │
│  ├─ セッション管理                     │
│  ├─ タイムアウト制御                   │
│  └─ レート制限                         │
│                                         │
│  監査ログ                               │
│  ├─ 操作履歴記録                       │
│  ├─ エラー追跡                         │
│  └─ 成功率監視                         │
└─────────────────────────────────────────┘
```

## デプロイメント構成

```
/scout_related_files/
│
├── main.py                 # メインアプリケーション
├── browser_airwork.py      # Airwork自動化
├── browser_engage.py       # Engage自動化  
├── Utilities.py           # ユーティリティ関数
├── browser.py             # ブラウザ管理
├── auth.py                # 認証処理
├── const.py               # 定数定義
│
├── settings/              # 設定ファイル
│   ├── engage_settings.xlsx
│   ├── scout_settings.xlsx
│   └── ...
│
├── account.xlsx           # Engage認証情報
├── account_airwork.xlsx   # Airwork認証情報
│
├── requirements.txt       # 依存関係
│
└── ドキュメント/
    ├── SCOUT_DOCUMENTATION.md
    ├── QUICKSTART_GUIDE.md
    └── ARCHITECTURE_DIAGRAM.md
```